<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Authority Before Execution · Execution Boundary Inspection</title>
  <meta name="description" content="Execution-time authority enforcement, proven at the commit boundary with reproducible artifacts and Opik tracing." />
  <meta name="color-scheme" content="light dark" />
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <header class="topbar">
    <div class="container topbar__inner">
      <div class="brand">
        <div class="brand__mark" aria-hidden="true"></div>
        <div class="brand__text">
          <div class="brand__name">Authority Before Execution</div>
          <div class="brand__meta">Execution Boundary Inspection · proof-first · read-only</div>
        </div>
      </div>

      <nav class="nav" aria-label="Primary">
        <a href="#summary">Summary</a>
        <a href="#proof">Proof</a>
        <a href="#contract">Contract</a>
        <a href="#evidence">Evidence</a>
        <a href="#reproduce">Reproduce</a>
        <a href="#traces">Traces</a>
      </nav>

      <div class="topbar__actions">
        <a class="btn btn--ghost" href="https://github.com/qstackfield/authority-before-execution" target="_blank" rel="noreferrer">Repository</a>
        <a class="btn" href="#reproduce">Run Demo</a>
      </div>
    </div>
  </header>

  <main class="container">
    <section id="summary" class="hero">
      <div class="hero__left">
        <div class="eyebrow">EXECUTION BOUNDARY CLAIM</div>
        <h1>Execution-time authority enforcement, made inspectable.</h1>
        <p class="lead">
          This site is a static inspection surface for one system property:
          <strong>execution is blocked unless authority is present, valid, in scope, and unexpired at the moment of commit.</strong>
          No narrative. No UI theater. The proof is produced by running the demo and inspecting emitted artifacts and traces.
        </p>

        <div class="chips" role="list" aria-label="Capabilities">
          <span class="chip" role="listitem">Fail closed</span>
          <span class="chip" role="listitem">Scoped approvals</span>
          <span class="chip" role="listitem">Time-bound authority</span>
          <span class="chip" role="listitem">Typed decision contract</span>
          <span class="chip" role="listitem">Traced + evaluated</span>
        </div>

        <div class="callout callout--primary">
          <div class="callout__row">
            <div class="callout__k">Invariant ID</div>
            <div class="callout__v mono">ABE-EXEC-001</div>
          </div>
          <div class="callout__row">
            <div class="callout__k">Enforcement point</div>
            <div class="callout__v mono">core/executor.py</div>
          </div>
          <div class="callout__row">
            <div class="callout__k">Trace boundary</div>
            <div class="callout__v mono">execution.commit</div>
          </div>
          <div class="callout__rule">
            If explicit authority is not present, valid, and in scope at execution time, the state transition must not occur.
          </div>
        </div>
      </div>

      <aside class="hero__right">
        <div class="panel">
          <div class="panel__head">
            <div class="panel__title">Judge checklist</div>
            <div class="panel__sub">Verify the claim in minutes.</div>
          </div>

          <ol class="checklist">
            <li>Run <span class="mono">python3 -m demo.run_demo</span></li>
            <li>Confirm four outcomes: missing, valid, out-of-scope, expired</li>
            <li>Inspect emitted artifacts: <span class="mono">docs/artifacts/*.json</span></li>
            <li>Confirm the boundary trace exists in Opik</li>
          </ol>

          <div class="panel__foot">
            <div class="note">
              This site is static on purpose. Evidence is generated at runtime by the demo and can be verified as JSON artifacts and traces.
            </div>
          </div>
        </div>
      </aside>
    </section>

    <section id="proof" class="section">
      <header class="section__head">
        <h2>Proof</h2>
        <p>
          The point is not “we logged.” The point is <strong>enforcement occurs at the commit boundary</strong> and returns a structured allow/deny result.
          That boundary emits artifacts and traces that are inspectable and reproducible.
        </p>
      </header>

      <div class="grid grid--3">
        <article class="card">
          <div class="card__k">Boundary</div>
          <div class="card__t">Executor is the only commit point</div>
          <p class="card__p">
            State change is only permitted in one place. Callers cannot bypass it and cannot “forget” a denial.
            The executor returns structured outcomes and exports immutable artifacts.
          </p>
          <div class="card__f mono">core/executor.py</div>
        </article>

        <article class="card">
          <div class="card__k">Gate</div>
          <div class="card__t">Authority is checked at runtime</div>
          <p class="card__p">
            Authority must exist at execution time and must be valid, in scope, and unexpired.
            Prior approval alone is insufficient.
          </p>
          <div class="card__f mono">core/authority_gate.py</div>
        </article>

        <article class="card">
          <div class="card__k">Evidence</div>
          <div class="card__t">Artifacts + traces are the proof</div>
          <p class="card__p">
            Each attempt produces an artifact on disk and a trace at the boundary. Evaluations aggregate outcomes into measurable governance signals.
          </p>
          <div class="card__f mono">docs/artifacts/*.json · Opik traces</div>
        </article>
      </div>

      <div class="flow">
        <div class="flow__title">Execution flow</div>
        <pre class="mono flow__body" aria-label="Execution flow">
User Task
  ↓
Agent (Reasoning + Proposal)
  ↓
Evaluation + Trace (Opik)
  ↓
Authority Gate
├─ Approved → Execute → Outcome Traced
└─ Denied   → Block   → Denial Traced
        </pre>
      </div>
    </section>

    <section id="contract" class="section">
      <header class="section__head">
        <h2>Contract</h2>
        <p>
          Typed-first on purpose. Governance fails in the cracks when interfaces are ambiguous.
          The decision object makes authority requirements explicit at the boundary.
        </p>
      </header>

      <div class="split">
        <div class="card card--tight">
          <div class="card__t">Decision contract (input)</div>
          <p class="card__p">Canonical shape of the decision evaluated at the execution boundary.</p>
          <div class="code">
            <div class="code__bar">
              <div class="code__title mono">sample_decision.json</div>
              <button class="copy" data-copy="#sampleDecisionRendered">Copy</button>
            </div>
            <pre id="sampleDecisionRendered" class="code__body mono" aria-label="Sample decision"></pre>
          </div>
        </div>

        <div class="card card--tight">
          <div class="card__t">Execution result (output)</div>
          <p class="card__p">Canonical shape of structured allow/deny output from the executor.</p>
          <div class="code">
            <div class="code__bar">
              <div class="code__title mono">sample_execution_result.json</div>
              <button class="copy" data-copy="#sampleResultRendered">Copy</button>
            </div>
            <pre id="sampleResultRendered" class="code__body mono" aria-label="Sample execution result"></pre>
          </div>
        </div>
      </div>
    </section>

    <section id="evidence" class="section">
      <header class="section__head">
        <h2>Evidence</h2>
        <p>
          The website is static. The evidence is produced when the demo executes.
          The artifact export happens at the boundary and is written as immutable JSON.
        </p>
      </header>

      <div class="grid grid--2">
        <div class="card">
          <div class="card__t">Artifacts written at runtime</div>
          <p class="card__p">
            When you run the demo locally, it writes artifacts on the machine that executed the run.
            These are intentionally not committed to the repo because they are runtime evidence.
          </p>

          <div class="table">
            <div class="table__row">
              <div class="table__k mono">Path</div>
              <div class="table__v mono">docs/artifacts/</div>
            </div>
            <div class="table__row">
              <div class="table__k mono">Files</div>
              <div class="table__v mono">demo-deploy-001.json · demo-delete-001.json</div>
            </div>
            <div class="table__row">
              <div class="table__k mono">Exporter</div>
              <div class="table__v mono">core/artifact_exporter.py</div>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card__t">What makes this “real” (not UI output)</div>
          <p class="card__p">
            The demo varies authority bindings against the same proposal and executes through the real enforcement path.
            The console output is derived from structured results returned by the executor, and the trace is emitted at the commit boundary.
          </p>

          <div class="pillset" aria-label="Denial reasons">
            <span class="pill pill--deny">missing_authority</span>
            <span class="pill pill--deny">scope_violation</span>
            <span class="pill pill--deny">expired_authority</span>
            <span class="pill pill--ok">permitted</span>
          </div>
        </div>
      </div>
    </section>

    <section id="reproduce" class="section">
      <header class="section__head">
        <h2>Reproduce</h2>
        <p>Fastest path for a judge to verify enforcement and see artifacts.</p>
      </header>

      <div class="repro">
        <div class="repro__row">
          <div class="repro__k">1) Run the demo</div>
          <div class="repro__v">
            <div class="cmd">
              <div class="cmd__bar">
                <div class="cmd__title mono">Command</div>
                <button class="copy" data-copy="#cmd1">Copy</button>
              </div>
              <pre id="cmd1" class="cmd__body mono">python3 -m demo.run_demo</pre>
            </div>
          </div>
        </div>

        <div class="repro__row">
          <div class="repro__k">2) List artifacts</div>
          <div class="repro__v">
            <div class="cmd">
              <div class="cmd__bar">
                <div class="cmd__title mono">Command</div>
                <button class="copy" data-copy="#cmd2">Copy</button>
              </div>
              <pre id="cmd2" class="cmd__body mono">ls -la docs/artifacts</pre>
            </div>
          </div>
        </div>

        <div class="repro__row">
          <div class="repro__k">3) Inspect JSON proof</div>
          <div class="repro__v">
            <div class="cmd">
              <div class="cmd__bar">
                <div class="cmd__title mono">Command</div>
                <button class="copy" data-copy="#cmd3">Copy</button>
              </div>
              <pre id="cmd3" class="cmd__body mono">sed -n '1,220p' docs/artifacts/demo-deploy-001.json</pre>
            </div>
          </div>
        </div>

        <div class="repro__row">
          <div class="repro__k">4) Optional: comparative experiment</div>
          <div class="repro__v">
            <div class="cmd">
              <div class="cmd__bar">
                <div class="cmd__title mono">Command</div>
                <button class="copy" data-copy="#cmd4">Copy</button>
              </div>
              <pre id="cmd4" class="cmd__body mono">python3 -m demo.experiment_compare</pre>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="traces" class="section">
      <header class="section__head">
        <h2>Traces</h2>
        <p>Boundary traces prove enforcement happened at commit time, not post-hoc.</p>
      </header>

      <div class="grid grid--2">
        <div class="card">
          <div class="card__t">What is traced</div>
          <ul class="bullets">
            <li><span class="mono">execution.commit</span> spans the execution boundary</li>
            <li>Decision snapshot + allow/deny outcome + authority context</li>
            <li>Denial reasons are explicit and structured</li>
          </ul>
        </div>

        <div class="card">
          <div class="card__t">Where to find it</div>
          <p class="card__p">
            When you run the demo, it prints an Opik session redirect link. Open it and inspect the boundary trace.
          </p>
          <div class="note">
            If you are reviewing this in GitHub Pages, traces are not shown here because they are produced when you execute the demo.
          </div>
        </div>
      </div>
    </section>

    <footer class="footer">
      <div class="footer__left">
        <div class="footer__k">Repository</div>
        <a class="footer__v" href="https://github.com/qstackfield/authority-before-execution" target="_blank" rel="noreferrer">github.com/qstackfield/authority-before-execution</a>
      </div>
      <div class="footer__right">
        <div class="footer__k">Claim</div>
        <div class="footer__v">No authority at execution time → no state change</div>
      </div>
    </footer>
  </main>

  <!-- Embedded samples (no network fetch = no 404s) -->
  <script id="sampleDecision" type="application/json">
{
  "decision_id": "demo-deploy-001",
  "created_at": "2026-01-14T21:08:25.806376Z",
  "proposal": {
    "action": "deploy_model",
    "params": {
      "model": "gpt-4.1",
      "environment": "production"
    },
    "rationale": "Deploy approved model version after validation pass"
  },
  "authority": {
    "approved_by": "security-lead@company.com",
    "reason": "Change approved under incident protocol IR-2026-014",
    "scope": "deploy_model",
    "expires_at": "2026-01-14T21:08:30.867458Z"
  }
}
  </script>

  <script id="sampleResult" type="application/json">
{
  "status": "blocked",
  "execution_allowed": false,
  "deny_reason": "missing_authority",
  "message": "Execution blocked: authority not bound",
  "decision_id": "demo-deploy-001",
  "action": "deploy_model",
  "authority_overbroad": false
}
  </script>

  <script>
    function prettyFromScript(id) {
      const el = document.getElementById(id);
      if (!el) return "{}";
      try {
        const obj = JSON.parse(el.textContent.trim());
        return JSON.stringify(obj, null, 2);
      } catch (e) {
        return "{\n  \"error\": \"failed to render sample\"\n}";
      }
    }

    document.getElementById("sampleDecisionRendered").textContent = prettyFromScript("sampleDecision");
    document.getElementById("sampleResultRendered").textContent = prettyFromScript("sampleResult");

    // Copy buttons (single-file, no deps)
    for (const btn of document.querySelectorAll("button.copy[data-copy]")) {
      btn.addEventListener("click", async () => {
        const sel = btn.getAttribute("data-copy");
        const target = document.querySelector(sel);
        if (!target) return;

        const text = target.textContent || "";
        try {
          await navigator.clipboard.writeText(text);
          const prev = btn.textContent;
          btn.textContent = "Copied";
          btn.classList.add("copy--ok");
          setTimeout(() => {
            btn.textContent = prev;
            btn.classList.remove("copy--ok");
          }, 900);
        } catch (e) {
          // fallback: select text
          const r = document.createRange();
          r.selectNodeContents(target);
          const s = window.getSelection();
          s.removeAllRanges();
          s.addRange(r);
        }
      });
    }
  </script>
</body>
</html>
